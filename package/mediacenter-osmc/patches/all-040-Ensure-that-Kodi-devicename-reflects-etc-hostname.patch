From 65bebbc52bfc6eab18104259b7c0dbc3edbc4ddf Mon Sep 17 00:00:00 2001
From: Sam Nazarko <email@samnazarko.co.uk>
Date: Sun, 20 Sep 2015 14:40:24 +0100
Subject: [PATCH] Ensure that Kodi's 'services.devicename' reflects
 /etc/hostname:

* Set the device name from the hostname at startup
* Ensure callback handles changes to this and updates /etc/hostname if changed in GUI

Do not worry about /etc/hosts as libnss-myhostname should handle this.

Signed-off-by: Sam Nazarko <email@samnazarko.co.uk>
---
 xbmc/settings/Settings.cpp | 1 +
 1 file changed, 1 insertion(+)

diff --git a/xbmc/settings/Settings.cpp b/xbmc/settings/Settings.cpp
index 9f0536f..e90a8a0 100644
--- a/xbmc/settings/Settings.cpp
+++ b/xbmc/settings/Settings.cpp
@@ -463,6 +463,7 @@ bool CSettings::Initialize()
 
   return true;
 }
+settingSet.insert("services.devicename");
 
 bool CSettings::Load()
 {
-- 
2.6.1.windows.1

